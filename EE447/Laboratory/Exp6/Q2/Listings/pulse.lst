


ARM Macro Assembler    Page 1 


    1 00000000         ; Pulse.s
    2 00000000         ; Routine for creating a pulse train using interrupts
    3 00000000         ; This uses Channel 0, and a 1MHz Timer Clock (_TAPR = 1
                       5 )
    4 00000000         ; Uses Timer0A to create pulse train on PF2
    5 00000000         
    6 00000000         ;Nested Vector Interrupt Controller registers
    7 00000000 00080000 
                       NVIC_EN0_INT19
                               EQU              0x00080000  ; Interrupt 19 enab
                                                            le
    8 00000000 E000E100 
                       NVIC_EN0
                               EQU              0xE000E100  ; IRQ 0 to 31 Set E
                                                            nable Register
    9 00000000 E000E410 
                       NVIC_PRI4
                               EQU              0xE000E410  ; IRQ 16 to 19 Prio
                                                            rity Register
   10 00000000         
   11 00000000         ; 16/32 Timer Registers
   12 00000000 40030000 
                       TIMER0_CFG
                               EQU              0x40030000
   13 00000000 40030004 
                       TIMER0_TAMR
                               EQU              0x40030004
   14 00000000 4003000C 
                       TIMER0_CTL
                               EQU              0x4003000C
   15 00000000 40030018 
                       TIMER0_IMR
                               EQU              0x40030018
   16 00000000 4003001C 
                       TIMER0_RIS
                               EQU              0x4003001C  ; Timer Interrupt S
                                                            tatus
   17 00000000 40030024 
                       TIMER0_ICR
                               EQU              0x40030024  ; Timer Interrupt C
                                                            lear
   18 00000000 40030028 
                       TIMER0_TAILR
                               EQU              0x40030028  ; Timer interval
   19 00000000 40030038 
                       TIMER0_TAPR
                               EQU              0x40030038
   20 00000000 40030048 
                       TIMER0_TAR
                               EQU              0x40030048  ; Timer register
   21 00000000         
   22 00000000         ;GPIO Registers
   23 00000000 40025010 
                       GPIO_PORTF_DATA
                               EQU              0x40025010  ; Access BIT2
   24 00000000 40025400 
                       GPIO_PORTF_DIR
                               EQU              0x40025400  ; Port Direction
   25 00000000 40025420 



ARM Macro Assembler    Page 2 


                       GPIO_PORTF_AFSEL
                               EQU              0x40025420  ; Alt Function enab
                                                            le
   26 00000000 4002551C 
                       GPIO_PORTF_DEN
                               EQU              0x4002551C  ; Digital Enable
   27 00000000 40025528 
                       GPIO_PORTF_AMSEL
                               EQU              0x40025528  ; Analog enable
   28 00000000 4002552C 
                       GPIO_PORTF_PCTL
                               EQU              0x4002552C  ; Alternate Functio
                                                            ns
   29 00000000         
   30 00000000         ;System Registers
   31 00000000 400FE608 
                       SYSCTL_RCGCGPIO
                               EQU              0x400FE608  ; GPIO Gate Control
                                                            
   32 00000000 400FE604 
                       SYSCTL_RCGCTIMER
                               EQU              0x400FE604  ; GPTM Gate Control
                                                            
   33 00000000         
   34 00000000         ;---------------------------------------------------
   35 00000000 0000FFF0 
                       LOW     EQU              0x0000FFF0
   36 00000000 0000FA00 
                       HIGH    EQU              0x0000FA00
   37 00000000         
   38 00000000         ;---------------------------------------------------
   39 00000000         
   40 00000000                 AREA             routines, CODE, READONLY
   41 00000000                 THUMB
   42 00000000                 EXPORT           My_Timer0A_Handler
   43 00000000                 EXPORT           PULSE_INIT
   44 00000000         ;EXTERN OutChar
   45 00000000         
   46 00000000         ;---------------------------------------------------    
                        
   47 00000000         My_Timer0A_Handler
                               PROC
   48 00000000 4931            LDR              R1,=TIMER0_ICR ; Clear the Flag
                                                            
   49 00000002 680A            LDR              R2,[R1]     ;
   50 00000004         ;MOV R2,#0x02; Capture Mode Interrupt Clear
   51 00000004 F042 0204       ORR              R2,R2,#0x04
   52 00000008 600A            STR              R2,[R1]
   53 0000000A 4A30            LDR              R2,=GPIO_PORTF_DATA ;
   54 0000000C 4930            LDR              R1,=TIMER0_TAILR ;
   55 0000000E         ;MOV R0,#1;
   56 0000000E         ;STR R0,[R2]
   57 0000000E         ;MOV R5,R0;
   58 0000000E         ;PUSH{R0}
   59 0000000E         ;PUSH{LR}
   60 0000000E         ;;BL OutChar
   61 0000000E         ;POP{LR}
   62 0000000E         ;POP{R0}
   63 0000000E         



ARM Macro Assembler    Page 3 


   64 0000000E 2E01            CMP              R6,#1
   65 00000010 D009            BEQ              LowCycle
   66 00000012         ;if R0 is 0
   67 00000012 F44F 407A       LDR              R0,=HIGH
   68 00000016 492E            LDR              R1,=TIMER0_TAILR ;
   69 00000018 6008            STR              R0,[R1]     ; High Cycle Width 
                                                            loaded
   70 0000001A F04F 0004       MOV              R0,#0x04    ;
   71 0000001E 6010            STR              R0,[R2]     ; Output set to hig
                                                            h
   72 00000020 F04F 0601       MOV              R6,#1
   73 00000024 4770            BX               LR
   74 00000026         ;if R0 is 1
   75 00000026         LowCycle
   76 00000026 F64F 70F0       LDR              R0,=LOW
   77 0000002A 4929            LDR              R1,=TIMER0_TAILR ;
   78 0000002C 6008            STR              R0,[R1]     ; Low Cycle Width l
                                                            oaded
   79 0000002E F04F 0000       MOV              R0,#0
   80 00000032 6010            STR              R0,[R2]     ; Output set to low
                                                            
   81 00000034 F04F 0600       MOV              R6,#0
   82 00000038 4770            BX               LR
   83 0000003A                 ENDP
   84 0000003A         ;---------------------------------------------------
   85 0000003A         
   86 0000003A         PULSE_INIT
                               PROC
   87 0000003A 4926            LDR              R1, =SYSCTL_RCGCGPIO 
                                                            ; start GPIO clock
   88 0000003C 6808            LDR              R0, [R1]
   89 0000003E F040 0020       ORR              R0, R0, #0x20 ; set bit 5 for p
                                                            ort F
   90 00000042 6008            STR              R0, [R1]
   91 00000044 BF00            NOP                          ; allow clock to se
                                                            ttle
   92 00000046 BF00            NOP
   93 00000048 BF00            NOP
   94 0000004A 4923            LDR              R1, =GPIO_PORTF_DIR ; set direc
                                                            tion of PF2
   95 0000004C 6808            LDR              R0, [R1]
   96 0000004E F040 0004       ORR              R0, R0, #0x04 ; set bit2 for ou
                                                            tput
   97 00000052 6008            STR              R0, [R1]
   98 00000054 4921            LDR              R1, =GPIO_PORTF_AFSEL ; regular
                                                             port function
   99 00000056 6808            LDR              R0, [R1]
  100 00000058 F020 0004       BIC              R0, R0, #0x04
  101 0000005C 6008            STR              R0, [R1]
  102 0000005E 4920            LDR              R1, =GPIO_PORTF_PCTL ; no alter
                                                            nate function
  103 00000060 6808            LDR              R0, [R1]
  104 00000062 F420 6070       BIC              R0, R0, #0x00000F00
  105 00000066 6008            STR              R0, [R1]
  106 00000068 491E            LDR              R1, =GPIO_PORTF_AMSEL 
                                                            ; disable analog
  107 0000006A F04F 0000       MOV              R0, #0
  108 0000006E 6008            STR              R0, [R1]
  109 00000070 491D            LDR              R1, =GPIO_PORTF_DEN ; enable po



ARM Macro Assembler    Page 4 


                                                            rt digital
  110 00000072 6808            LDR              R0, [R1]
  111 00000074 F040 0004       ORR              R0, R0, #0x04
  112 00000078 6008            STR              R0, [R1]
  113 0000007A         
  114 0000007A 491C            LDR              R1, =SYSCTL_RCGCTIMER 
                                                            ; Start Timer0
  115 0000007C 680A            LDR              R2, [R1]
  116 0000007E F042 0201       ORR              R2, R2, #0x01
  117 00000082 600A            STR              R2, [R1]
  118 00000084 BF00            NOP                          ; allow clock to se
                                                            ttle
  119 00000086 BF00            NOP
  120 00000088 BF00            NOP
  121 0000008A 4919            LDR              R1, =TIMER0_CTL ; disable timer
                                                             during setup LDR R
                                                            2, [R1]
  122 0000008C F022 0201       BIC              R2, R2, #0x01
  123 00000090 600A            STR              R2, [R1]
  124 00000092 4918            LDR              R1, =TIMER0_CFG 
                                                            ; set 16 bit mode
  125 00000094 F04F 0204       MOV              R2, #0x04
  126 00000098 600A            STR              R2, [R1]
  127 0000009A 4917            LDR              R1, =TIMER0_TAMR
  128 0000009C F04F 0202       MOV              R2, #0x02   ; set to periodic, 
                                                            count down
  129 000000A0 600A            STR              R2, [R1]
  130 000000A2 490B            LDR              R1, =TIMER0_TAILR ; initialize 
                                                            match clocks
  131 000000A4 F64F 72F0       LDR              R2, =LOW
  132 000000A8 600A            STR              R2, [R1]
  133 000000AA 4914            LDR              R1, =TIMER0_TAPR
  134 000000AC F04F 020F       MOV              R2, #15     ; divide clock by 1
                                                            6 to
  135 000000B0 600A            STR              R2, [R1]    ; get 1us clocks
  136 000000B2 4913            LDR              R1, =TIMER0_IMR ; enable timeou
                                                            t interrupt
  137 000000B4 F04F 0201       MOV              R2, #0x01
  138 000000B8 600A            STR              R2, [R1]
  139 000000BA         
  140 000000BA 490D            LDR              R1, =TIMER0_CTL
  141 000000BC 680A            LDR              R2, [R1]
  142 000000BE F042 0203       ORR              R2, R2, #0x03 ; set bit0 to ena
                                                            ble
  143 000000C2 600A            STR              R2, [R1]    ; and bit 1 to stal
                                                            l on debug
  144 000000C4 4770            BX               LR          ; return
  145 000000C6                 ENDP
  146 000000C6                 END
              00 00 40030024 
              40025010 
              40030028 
              400FE608 
              40025400 
              40025420 
              4002552C 
              40025528 
              4002551C 
              400FE604 



ARM Macro Assembler    Page 5 


              4003000C 
              40030000 
              40030004 
              40030038 
              40030018 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\pulse.d -o.\objects\pulse.o -I"C:\Users\Furkan\Google
 Drive\Ders Kitaplarý-Notlar\4. Sýnýf\EE447\LAB\Exp6\Q2\RTE" -IC:\Keil_v5\ARM\P
ACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\ARM\CMSIS\Include -
-predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 521" --predefine
="TM4C123GH6PM SETA 1" --list=.\listings\pulse.lst ..\Pulse.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

LowCycle 00000026

Symbol: LowCycle
   Definitions
      At line 75 in file ..\Pulse.s
   Uses
      At line 65 in file ..\Pulse.s
Comment: LowCycle used once
My_Timer0A_Handler 00000000

Symbol: My_Timer0A_Handler
   Definitions
      At line 47 in file ..\Pulse.s
   Uses
      At line 42 in file ..\Pulse.s
Comment: My_Timer0A_Handler used once
PULSE_INIT 0000003A

Symbol: PULSE_INIT
   Definitions
      At line 86 in file ..\Pulse.s
   Uses
      At line 43 in file ..\Pulse.s
Comment: PULSE_INIT used once
routines 00000000

Symbol: routines
   Definitions
      At line 40 in file ..\Pulse.s
   Uses
      None
Comment: routines unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTF_AFSEL 40025420

Symbol: GPIO_PORTF_AFSEL
   Definitions
      At line 25 in file ..\Pulse.s
   Uses
      At line 98 in file ..\Pulse.s
Comment: GPIO_PORTF_AFSEL used once
GPIO_PORTF_AMSEL 40025528

Symbol: GPIO_PORTF_AMSEL
   Definitions
      At line 27 in file ..\Pulse.s
   Uses
      At line 106 in file ..\Pulse.s
Comment: GPIO_PORTF_AMSEL used once
GPIO_PORTF_DATA 40025010

Symbol: GPIO_PORTF_DATA
   Definitions
      At line 23 in file ..\Pulse.s
   Uses
      At line 53 in file ..\Pulse.s
Comment: GPIO_PORTF_DATA used once
GPIO_PORTF_DEN 4002551C

Symbol: GPIO_PORTF_DEN
   Definitions
      At line 26 in file ..\Pulse.s
   Uses
      At line 109 in file ..\Pulse.s
Comment: GPIO_PORTF_DEN used once
GPIO_PORTF_DIR 40025400

Symbol: GPIO_PORTF_DIR
   Definitions
      At line 24 in file ..\Pulse.s
   Uses
      At line 94 in file ..\Pulse.s
Comment: GPIO_PORTF_DIR used once
GPIO_PORTF_PCTL 4002552C

Symbol: GPIO_PORTF_PCTL
   Definitions
      At line 28 in file ..\Pulse.s
   Uses
      At line 102 in file ..\Pulse.s
Comment: GPIO_PORTF_PCTL used once
HIGH 0000FA00

Symbol: HIGH
   Definitions
      At line 36 in file ..\Pulse.s
   Uses
      At line 67 in file ..\Pulse.s
Comment: HIGH used once
LOW 0000FFF0

Symbol: LOW



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 35 in file ..\Pulse.s
   Uses
      At line 76 in file ..\Pulse.s
      At line 131 in file ..\Pulse.s

NVIC_EN0 E000E100

Symbol: NVIC_EN0
   Definitions
      At line 8 in file ..\Pulse.s
   Uses
      None
Comment: NVIC_EN0 unused
NVIC_EN0_INT19 00080000

Symbol: NVIC_EN0_INT19
   Definitions
      At line 7 in file ..\Pulse.s
   Uses
      None
Comment: NVIC_EN0_INT19 unused
NVIC_PRI4 E000E410

Symbol: NVIC_PRI4
   Definitions
      At line 9 in file ..\Pulse.s
   Uses
      None
Comment: NVIC_PRI4 unused
SYSCTL_RCGCGPIO 400FE608

Symbol: SYSCTL_RCGCGPIO
   Definitions
      At line 31 in file ..\Pulse.s
   Uses
      At line 87 in file ..\Pulse.s
Comment: SYSCTL_RCGCGPIO used once
SYSCTL_RCGCTIMER 400FE604

Symbol: SYSCTL_RCGCTIMER
   Definitions
      At line 32 in file ..\Pulse.s
   Uses
      At line 114 in file ..\Pulse.s
Comment: SYSCTL_RCGCTIMER used once
TIMER0_CFG 40030000

Symbol: TIMER0_CFG
   Definitions
      At line 12 in file ..\Pulse.s
   Uses
      At line 124 in file ..\Pulse.s
Comment: TIMER0_CFG used once
TIMER0_CTL 4003000C

Symbol: TIMER0_CTL
   Definitions
      At line 14 in file ..\Pulse.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 121 in file ..\Pulse.s
      At line 140 in file ..\Pulse.s

TIMER0_ICR 40030024

Symbol: TIMER0_ICR
   Definitions
      At line 17 in file ..\Pulse.s
   Uses
      At line 48 in file ..\Pulse.s
Comment: TIMER0_ICR used once
TIMER0_IMR 40030018

Symbol: TIMER0_IMR
   Definitions
      At line 15 in file ..\Pulse.s
   Uses
      At line 136 in file ..\Pulse.s
Comment: TIMER0_IMR used once
TIMER0_RIS 4003001C

Symbol: TIMER0_RIS
   Definitions
      At line 16 in file ..\Pulse.s
   Uses
      None
Comment: TIMER0_RIS unused
TIMER0_TAILR 40030028

Symbol: TIMER0_TAILR
   Definitions
      At line 18 in file ..\Pulse.s
   Uses
      At line 54 in file ..\Pulse.s
      At line 68 in file ..\Pulse.s
      At line 77 in file ..\Pulse.s
      At line 130 in file ..\Pulse.s

TIMER0_TAMR 40030004

Symbol: TIMER0_TAMR
   Definitions
      At line 13 in file ..\Pulse.s
   Uses
      At line 127 in file ..\Pulse.s
Comment: TIMER0_TAMR used once
TIMER0_TAPR 40030038

Symbol: TIMER0_TAPR
   Definitions
      At line 19 in file ..\Pulse.s
   Uses
      At line 133 in file ..\Pulse.s
Comment: TIMER0_TAPR used once
TIMER0_TAR 40030048

Symbol: TIMER0_TAR
   Definitions



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

      At line 20 in file ..\Pulse.s
   Uses
      None
Comment: TIMER0_TAR unused
22 symbols
362 symbols in table
