


ARM Macro Assembler    Page 1 


    1 00000000 400053FC 
                       GPIO_PORTB_DATA
                               EQU              0x400053FC
    2 00000000 4000541C 
                       GPIO_PORTB_ICR
                               EQU              0x4000541C
    3 00000000 40005414 
                       GPIO_PORTB_RIS
                               EQU              0x40005414
    4 00000000                 AREA             rutins , CODE, READONLY
    5 00000000                 THUMB
    6 00000000                 EXPORT           CHECKINPUT  ;GPIOPortB_Handler 
                                                            ;
    7 00000000                 EXTERN           SignalSend  ; GPIO signal send
    8 00000000                 EXTERN           delay       ;
    9 00000000         CHECKINPUT
                               PROC
   10 00000000 4940            LDR              R1,=GPIO_PORTB_DATA ; Data addr
                                                            ess in R1
   11 00000002 F04F 0200       MOV              R2,#0       ; R2 holds the info
                                                            rmation cw or ccw
   12 00000006 F04F 0301       MOV              R3, #1      ;
   13 0000000A F244 2740 
              F2C0 070F        MOV32            R7, #1000000
   14 00000012 F04F 0400       MOV              R4, #0
   15 00000016 4622    Check   MOV              R2, R4
   16 00000018 6808            LDR              R0,[R1]     ;Checks for any inp
                                                            ut
   17 0000001A EA4F 1010       LSR              R0,#4       ;
   18 0000001E 0840            LSRS             R0,#1       ;
   19 00000020 D30E            BCC              Delay100
   20 00000022 0840            LSRS             R0,#1       ;
   21 00000024 D30C            BCC              Delay100
   22 00000026 0840            LSRS             R0,#1       ;
   23 00000028 D30A            BCC              Delay100
   24 0000002A 0840            LSRS             R0,#1       ;
   25 0000002C D308            BCC              Delay100
   26 0000002E 2A01            CMP              R2, #1
   27 00000030 D036            BEQ              CW
   28 00000032 2A02            CMP              R2, #2
   29 00000034 D047            BEQ              CCW
   30 00000036 2A03            CMP              R2, #3
   31 00000038 D058            BEQ              SPEEDUP
   32 0000003A 2A04            CMP              R2, #4
   33 0000003C D05B            BEQ              SPEEDDOWN
   34 0000003E E7EA            B                Check
   35 00000040 F247 1000 
              F2C0 0002 
                       Delay100
                               MOV32            R0,#160000  ;If any input is de
                                                            tected
   36 00000048 B500            PUSH{LR}
   37 0000004A F7FF FFFE       BL               delay
   38 0000004E F85D EB04       POP{LR}
   39 00000052 6808            LDR              R0,[R1]     ; Check Again
   40 00000054 EA4F 1010       LSR              R0,#4       ;
   41 00000058 0840            LSRS             R0,#1       ;
   42 0000005A BF38 2201       MOVCC            R2,#1       ; 1 is the cw direc
                                                            tion PB4 pressed



ARM Macro Assembler    Page 2 


   43 0000005E D30C            BCC              Released    ; If input is detec
                                                            ted again wait for 
                                                            relase
   44 00000060 0840            LSRS             R0,#1       ;
   45 00000062 BF38 2202       MOVCC            R2,#2       ; 2 is the ccw dire
                                                            ction PB5 pressed
   46 00000066 D308            BCC              Released
   47 00000068 0840            LSRS             R0,#1       ;
   48 0000006A BF38 2203       MOVCC            R2,#3       ; 3 is the speed-up
                                                             direction PB6 pres
                                                            sed
   49 0000006E D304            BCC              Released    ; If input is detec
                                                            ted again wait for 
                                                            relase
   50 00000070 0840            LSRS             R0,#1       ;
   51 00000072 BF38 2204       MOVCC            R2,#4       ; 4 is the speed-do
                                                            wn direction PB7 pr
                                                            essed
   52 00000076 D300            BCC              Released
   53 00000078 4770            BX               LR          ; if no signal
   54 0000007A         
   55 0000007A         
   56 0000007A 6808    Released
                               LDR              R0,[R1]     ; It checks for if 
                                                            the switch is open 
                                                            again
   57 0000007C EA4F 1010       LSR              R0,#4       ;
   58 00000080 0840            LSRS             R0,#1       ;
   59 00000082 D3FA            BCC              Released    ; If it is not open
                                                            
   60 00000084 0840            LSRS             R0,#1       ;
   61 00000086 D3F8            BCC              Released    ;
   62 00000088 0840            LSRS             R0,#1       ;
   63 0000008A D3F6            BCC              Released    ; If it is not open
                                                            
   64 0000008C 0840            LSRS             R0,#1       ;
   65 0000008E D3F4            BCC              Released    ;
   66 00000090 2A01            CMP              R2, #1
   67 00000092 D005            BEQ              CW
   68 00000094 2A02            CMP              R2, #2
   69 00000096 D016            BEQ              CCW
   70 00000098 2A03            CMP              R2, #3
   71 0000009A D027            BEQ              SPEEDUP
   72 0000009C 2A04            CMP              R2, #4
   73 0000009E D02A            BEQ              SPEEDDOWN
   74 000000A0         
   75 000000A0         
   76 000000A0 F003 030F 
                       CW      AND              R3,R3,#15   ;
   77 000000A4 2B01            CMP              R3,#1
   78 000000A6 BF0C 2308       MOVEQ            R3,#8       ;
   79 000000AA 085B            LSRNE            R3,R3,#1    ;
   80 000000AC 461E            MOV              R6,R3       ;
   81 000000AE F7FF FFFE       BL               SignalSend
   82 000000B2 F04F 0000       MOV              R0, #0
   83 000000B6 4438            ADD              R0, R7
   84 000000B8 B500            PUSH             {LR}
   85 000000BA F7FF FFFE       BL               delay
   86 000000BE F85D EB04       POP              {LR}



ARM Macro Assembler    Page 3 


   87 000000C2 4614            MOV              R4, R2
   88 000000C4 E7A7            B                Check       ; 
   89 000000C6         
   90 000000C6 F003 030F 
                       CCW     AND              R3,R3,#15   ;
   91 000000CA 2B08            CMP              R3,#8
   92 000000CC BF0C 2301       MOVEQ            R3,#1       ;
   93 000000D0 005B            LSLNE            R3,R3,#1    ;
   94 000000D2 461E            MOV              R6,R3       ;
   95 000000D4 F7FF FFFE       BL               SignalSend  ;
   96 000000D8 F04F 0000       MOV              R0, #0
   97 000000DC 4438            ADD              R0, R7
   98 000000DE B500            PUSH             {LR}
   99 000000E0 F7FF FFFE       BL               delay
  100 000000E4 F85D EB04       POP              {LR}
  101 000000E8 4614            MOV              R4, R2
  102 000000EA E794            B                Check       ;   
  103 000000EC         SPEEDUP
  104 000000EC F247 1700 
              F2C0 0702        MOV32            R7, #160000
  105 000000F4 E78F            B                Check
  106 000000F6         SPEEDDOWN
  107 000000F6 F646 2700 
              F2C0 0718        MOV32            R7, #1600000
  108 000000FE E78A            B                Check
  109 00000100 4770            BX               LR          ; end
  110 00000102         
  111 00000102 00 00           ALIGN
  112 00000104                 ENDP
  113 00000104                 END
              400053FC 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\inputcheck.d -o.\objects\inputcheck.o -I.\RTE\_Target
_1 -IC:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v
5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION 
SETA 526" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\inputcheck.lst In
putCheck.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CCW 000000C6

Symbol: CCW
   Definitions
      At line 90 in file InputCheck.s
   Uses
      At line 29 in file InputCheck.s
      At line 69 in file InputCheck.s

CHECKINPUT 00000000

Symbol: CHECKINPUT
   Definitions
      At line 9 in file InputCheck.s
   Uses
      At line 6 in file InputCheck.s
Comment: CHECKINPUT used once
CW 000000A0

Symbol: CW
   Definitions
      At line 76 in file InputCheck.s
   Uses
      At line 27 in file InputCheck.s
      At line 67 in file InputCheck.s

Check 00000016

Symbol: Check
   Definitions
      At line 15 in file InputCheck.s
   Uses
      At line 34 in file InputCheck.s
      At line 88 in file InputCheck.s
      At line 102 in file InputCheck.s
      At line 105 in file InputCheck.s
      At line 108 in file InputCheck.s

Delay100 00000040

Symbol: Delay100
   Definitions
      At line 35 in file InputCheck.s
   Uses
      At line 19 in file InputCheck.s
      At line 21 in file InputCheck.s
      At line 23 in file InputCheck.s
      At line 25 in file InputCheck.s

Released 0000007A

Symbol: Released
   Definitions
      At line 56 in file InputCheck.s
   Uses
      At line 43 in file InputCheck.s
      At line 46 in file InputCheck.s
      At line 49 in file InputCheck.s
      At line 52 in file InputCheck.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 59 in file InputCheck.s
      At line 61 in file InputCheck.s
      At line 63 in file InputCheck.s
      At line 65 in file InputCheck.s

SPEEDDOWN 000000F6

Symbol: SPEEDDOWN
   Definitions
      At line 106 in file InputCheck.s
   Uses
      At line 33 in file InputCheck.s
      At line 73 in file InputCheck.s

SPEEDUP 000000EC

Symbol: SPEEDUP
   Definitions
      At line 103 in file InputCheck.s
   Uses
      At line 31 in file InputCheck.s
      At line 71 in file InputCheck.s

rutins 00000000

Symbol: rutins
   Definitions
      At line 4 in file InputCheck.s
   Uses
      None
Comment: rutins unused
9 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTB_DATA 400053FC

Symbol: GPIO_PORTB_DATA
   Definitions
      At line 1 in file InputCheck.s
   Uses
      At line 10 in file InputCheck.s
Comment: GPIO_PORTB_DATA used once
GPIO_PORTB_ICR 4000541C

Symbol: GPIO_PORTB_ICR
   Definitions
      At line 2 in file InputCheck.s
   Uses
      None
Comment: GPIO_PORTB_ICR unused
GPIO_PORTB_RIS 40005414

Symbol: GPIO_PORTB_RIS
   Definitions
      At line 3 in file InputCheck.s
   Uses
      None
Comment: GPIO_PORTB_RIS unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

SignalSend 00000000

Symbol: SignalSend
   Definitions
      At line 7 in file InputCheck.s
   Uses
      At line 81 in file InputCheck.s
      At line 95 in file InputCheck.s

delay 00000000

Symbol: delay
   Definitions
      At line 8 in file InputCheck.s
   Uses
      At line 37 in file InputCheck.s
      At line 85 in file InputCheck.s
      At line 99 in file InputCheck.s

2 symbols
350 symbols in table
