


ARM Macro Assembler    Page 1 


    1 00000000 400053FC 
                       GPIO_PORTB_DATA
                               EQU              0x400053FC
    2 00000000         
    3 00000000         ; 16/32 Timer Registers
    4 00000000 40031000 
                       TIMER1_CFG
                               EQU              0x40031000  ; Configuration Reg
                                                            ister
    5 00000000 40031004 
                       TIMER1_TAMR
                               EQU              0x40031004  ; Mode Register
    6 00000000 4003100C 
                       TIMER1_CTL
                               EQU              0x4003100C  ; Control Register
    7 00000000 4003101C 
                       TIMER1_RIS
                               EQU              0x4003101C  ; Raw interrupt Sta
                                                            tus
    8 00000000 40031024 
                       TIMER1_ICR
                               EQU              0x40031024  ; Interrupt Clear R
                                                            egister
    9 00000000 40031028 
                       TIMER1_TAILR
                               EQU              0x40031028  ; Interval Load Reg
                                                            ister
   10 00000000 40031030 
                       TIMER1_TAMATCHR
                               EQU              0x40031030  ; Match Register
   11 00000000 40031038 
                       TIMER1_TAPR
                               EQU              0x40031038  ; Prescaling Divide
                                                            r
   12 00000000 40031048 
                       TIMER1_TAR
                               EQU              0x40031048  ; Counter Register
   13 00000000 40031018 
                       TIMER1_IMR
                               EQU              0x40031018  ; Defining Interrup
                                                            t
   14 00000000 40031050 
                       TIMER1_TAV
                               EQU              0x40031050  ; To set the timer 
                                                            initial value
   15 00000000         
   16 00000000 20000480 
                       FIRST   EQU              0x20000480
   17 00000000 00F42400 
                       FREQ    EQU              0x00F42400  ; Freq 16M
   18 00000000                 AREA             sdata , DATA, READONLY
   19 00000000                 THUMB
   20 00000000 50 55 4C 
              53 45 20 
              57 49 44 
              54 48 20 MSG     DCB              "PULSE WIDTH "
   21 0000000C 0D              DCB              0x0D
   22 0000000D 04              DCB              0x04
   23 0000000E 50 45 52 



ARM Macro Assembler    Page 2 


              49 4F 44 
              20       MSG1    DCB              "PERIOD "
   24 00000015 0D              DCB              0x0D
   25 00000016 04              DCB              0x04
   26 00000017 44 55 54 
              59 20 43 
              59 43 4C 
              45 20 25 
              20       MSG2    DCB              "DUTY CYCLE % "
   27 00000024 0D              DCB              0x0D
   28 00000025 04              DCB              0x04
   29 00000026         ;LABEL  DIRECTIVE VALUE  COMMENT
   30 00000026                 AREA             main, READONLY, CODE
   31 00000000                 THUMB
   32 00000000                 EXTERN           PULSE_INIT  ; Pulse initializat
                                                            ion
   33 00000000                 EXTERN           READ_INIT
   34 00000000                 EXTERN           OutStr
   35 00000000                 EXTERN           CONVRT
   36 00000000                 EXPORT           __main      ; Make available
   37 00000000         
   38 00000000         __main
   39 00000000 F7FF FFFE       BL               READ_INIT   ; initialize read
   40 00000004 F7FF FFFE       BL               PULSE_INIT  ; initialize pulse
   41 00000008         START
   42 00000008 F04F 0000       MOV              R0,#0       ; R0 is turn counte
                                                            r 
   43 0000000C F04F 0A00       MOV              R10, #0
   44 00000010 F04F 0800       MOV              R8, #0
   45 00000014 F04F 0600       MOV              R6, #0
   46 00000018 B401            PUSH             {R0}
   47 0000001A         
   48 0000001A 4934    loop    LDR              R1, =TIMER1_RIS
   49 0000001C 680A            LDR              R2, [R1]
   50 0000001E F012 0204       ANDS             R2, #04     ; isolate CAERIS bi
                                                            t
   51 00000022 D0FA            BEQ              loop        ; if no capture, th
                                                            en loop
   52 00000024         
   53 00000024 4932            LDR              R1, =TIMER1_ICR ;
   54 00000026 F042 0204       ORR              R2, #0x04   ; by setting CAECIN
                                                            T bit to 1, CAERIS 
                                                            bir is cleared
   55 0000002A 600A            STR              R2, [R1]
   56 0000002C 4931            LDR              R1, =GPIO_PORTB_DATA
   57 0000002E 680A            LDR              R2, [R1]
   58 00000030 4931            LDR              R1, =TIMER1_TAR ; address of ti
                                                            mer register
   59 00000032 6808            LDR              R0, [R1]    ; Get timer registe
                                                            r value 
   60 00000034 2E00            CMP              R6, #0
   61 00000036 D005            BEQ              FIRST_NUMBER
   62 00000038 F1B8 0F00       CMP              R8, #0
   63 0000003C D006            BEQ              SECOND_NUMBER
   64 0000003E F1BA 0F00       CMP              R10, #0
   65 00000042 D005            BEQ              THIRD_NUMBER
   66 00000044         
   67 00000044         FIRST_NUMBER
   68 00000044 2A10            CMP              R2, #0x10



ARM Macro Assembler    Page 3 


   69 00000046 D1E8            BNE              loop
   70 00000048 4606            MOV              R6, R0
   71 0000004A E7E6            B                loop
   72 0000004C         SECOND_NUMBER
   73 0000004C 4680            MOV              R8, R0
   74 0000004E E7E4            B                loop
   75 00000050         THIRD_NUMBER
   76 00000050 4682            MOV              R10, R0
   77 00000052 E7FF            B                CONTINUE
   78 00000054         
   79 00000054         
   80 00000054         CONTINUE
   81 00000054 E92D 01E0       PUSH             {R5, R6, R7, R8}
   82 00000058 4D28            LDR              R5,=MSG
   83 0000005A F7FF FFFE       BL               OutStr
   84 0000005E E8BD 01E0       POP              {R5, R6, R7, R8}
   85 00000062 F04F 0210       MOV              R2, #16
   86 00000066 FBB6 F6F2       UDIV             R6, R6, R2
   87 0000006A FBB8 F8F2       UDIV             R8, R8, R2
   88 0000006E FBBA FAF2       UDIV             R10, R10, R2
   89 00000072 EBA6 0408       SUB              R4, R6, R8
   90 00000076 E92D 01E0       PUSH             {R5, R6, R7, R8}
   91 0000007A 4D21            LDR              R5,=FIRST   ;
   92 0000007C F7FF FFFE       BL               CONVRT
   93 00000080 4D1F            LDR              R5,=FIRST   ;   
   94 00000082         ;PUSH{LR}
   95 00000082 F7FF FFFE       BL               OutStr
   96 00000086         ;POP{LR}
   97 00000086 E8BD 01E0       POP              {R5, R6, R7, R8}
   98 0000008A E92D 01E0       PUSH             {R5, R6, R7, R8}
   99 0000008E 4D1D            LDR              R5,=MSG1
  100 00000090 F7FF FFFE       BL               OutStr
  101 00000094 E8BD 01E0       POP              {R5, R6, R7, R8}
  102 00000098 F04F 0400       MOV              R4, #0
  103 0000009C EBA6 040A       SUB              R4, R6, R10
  104 000000A0 E92D 01E0       PUSH             {R5, R6, R7, R8}
  105 000000A4 4D16            LDR              R5,=FIRST   ;
  106 000000A6 F7FF FFFE       BL               CONVRT
  107 000000AA 4D15            LDR              R5,=FIRST   ;   
  108 000000AC         ;PUSH{LR}
  109 000000AC F7FF FFFE       BL               OutStr
  110 000000B0 E8BD 01E0       POP              {R5, R6, R7, R8}
  111 000000B4         ;POP{LR}   
  112 000000B4 E92D 01E0       PUSH             {R5, R6, R7, R8}
  113 000000B8 4D13            LDR              R5,=MSG2
  114 000000BA F7FF FFFE       BL               OutStr
  115 000000BE E8BD 01E0       POP              {R5, R6, R7, R8}
  116 000000C2 EBA6 040A       SUB              R4, R6, R10
  117 000000C6 F04F 0B64       MOV              R11, #100
  118 000000CA EBA6 0608       SUB              R6, R6, R8
  119 000000CE FB06 F60B       MUL              R6, R6, R11
  120 000000D2 FBB6 F4F4       UDIV             R4, R6, R4
  121 000000D6 E92D 01E0       PUSH             {R5, R6, R7, R8}
  122 000000DA 4D09            LDR              R5,=FIRST   ;
  123 000000DC F7FF FFFE       BL               CONVRT
  124 000000E0 4D07            LDR              R5,=FIRST   ;   
  125 000000E2         ;PUSH{LR}
  126 000000E2 F7FF FFFE       BL               OutStr
  127 000000E6 E8BD 01E0       POP              {R5, R6, R7, R8}



ARM Macro Assembler    Page 4 


  128 000000EA         ;POP{LR}
  129 000000EA         
  130 000000EA E78D            B                START
  131 000000EC                 ALIGN
  132 000000EC                 END
              4003101C 
              40031024 
              400053FC 
              40031048 
              00000000 
              20000480 
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\__main.d -o.\objects\__main.o -I.\RTE\_Target_1 -IC:\
Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\ARM\CM
SIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 526
" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\__main.lst __main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MSG 00000000

Symbol: MSG
   Definitions
      At line 20 in file __main.s
   Uses
      At line 82 in file __main.s
Comment: MSG used once
MSG1 0000000E

Symbol: MSG1
   Definitions
      At line 23 in file __main.s
   Uses
      At line 99 in file __main.s
Comment: MSG1 used once
MSG2 00000017

Symbol: MSG2
   Definitions
      At line 26 in file __main.s
   Uses
      At line 113 in file __main.s
Comment: MSG2 used once
sdata 00000000

Symbol: sdata
   Definitions
      At line 18 in file __main.s
   Uses
      None
Comment: sdata unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CONTINUE 00000054

Symbol: CONTINUE
   Definitions
      At line 80 in file __main.s
   Uses
      At line 77 in file __main.s
Comment: CONTINUE used once
FIRST_NUMBER 00000044

Symbol: FIRST_NUMBER
   Definitions
      At line 67 in file __main.s
   Uses
      At line 61 in file __main.s
Comment: FIRST_NUMBER used once
SECOND_NUMBER 0000004C

Symbol: SECOND_NUMBER
   Definitions
      At line 72 in file __main.s
   Uses
      At line 63 in file __main.s
Comment: SECOND_NUMBER used once
START 00000008

Symbol: START
   Definitions
      At line 41 in file __main.s
   Uses
      At line 130 in file __main.s
Comment: START used once
THIRD_NUMBER 00000050

Symbol: THIRD_NUMBER
   Definitions
      At line 75 in file __main.s
   Uses
      At line 65 in file __main.s
Comment: THIRD_NUMBER used once
__main 00000000

Symbol: __main
   Definitions
      At line 38 in file __main.s
   Uses
      At line 36 in file __main.s
Comment: __main used once
loop 0000001A

Symbol: loop
   Definitions
      At line 48 in file __main.s
   Uses
      At line 51 in file __main.s
      At line 69 in file __main.s
      At line 71 in file __main.s
      At line 74 in file __main.s




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

main 00000000

Symbol: main
   Definitions
      At line 30 in file __main.s
   Uses
      None
Comment: main unused
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FIRST 20000480

Symbol: FIRST
   Definitions
      At line 16 in file __main.s
   Uses
      At line 91 in file __main.s
      At line 93 in file __main.s
      At line 105 in file __main.s
      At line 107 in file __main.s
      At line 122 in file __main.s
      At line 124 in file __main.s

FREQ 00F42400

Symbol: FREQ
   Definitions
      At line 17 in file __main.s
   Uses
      None
Comment: FREQ unused
GPIO_PORTB_DATA 400053FC

Symbol: GPIO_PORTB_DATA
   Definitions
      At line 1 in file __main.s
   Uses
      At line 56 in file __main.s
Comment: GPIO_PORTB_DATA used once
TIMER1_CFG 40031000

Symbol: TIMER1_CFG
   Definitions
      At line 4 in file __main.s
   Uses
      None
Comment: TIMER1_CFG unused
TIMER1_CTL 4003100C

Symbol: TIMER1_CTL
   Definitions
      At line 6 in file __main.s
   Uses
      None
Comment: TIMER1_CTL unused
TIMER1_ICR 40031024

Symbol: TIMER1_ICR
   Definitions
      At line 8 in file __main.s
   Uses
      At line 53 in file __main.s
Comment: TIMER1_ICR used once
TIMER1_IMR 40031018

Symbol: TIMER1_IMR
   Definitions
      At line 13 in file __main.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      None
Comment: TIMER1_IMR unused
TIMER1_RIS 4003101C

Symbol: TIMER1_RIS
   Definitions
      At line 7 in file __main.s
   Uses
      At line 48 in file __main.s
Comment: TIMER1_RIS used once
TIMER1_TAILR 40031028

Symbol: TIMER1_TAILR
   Definitions
      At line 9 in file __main.s
   Uses
      None
Comment: TIMER1_TAILR unused
TIMER1_TAMATCHR 40031030

Symbol: TIMER1_TAMATCHR
   Definitions
      At line 10 in file __main.s
   Uses
      None
Comment: TIMER1_TAMATCHR unused
TIMER1_TAMR 40031004

Symbol: TIMER1_TAMR
   Definitions
      At line 5 in file __main.s
   Uses
      None
Comment: TIMER1_TAMR unused
TIMER1_TAPR 40031038

Symbol: TIMER1_TAPR
   Definitions
      At line 11 in file __main.s
   Uses
      None
Comment: TIMER1_TAPR unused
TIMER1_TAR 40031048

Symbol: TIMER1_TAR
   Definitions
      At line 12 in file __main.s
   Uses
      At line 58 in file __main.s
Comment: TIMER1_TAR used once
TIMER1_TAV 40031050

Symbol: TIMER1_TAV
   Definitions
      At line 14 in file __main.s
   Uses
      None
Comment: TIMER1_TAV unused
14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

CONVRT 00000000

Symbol: CONVRT
   Definitions
      At line 35 in file __main.s
   Uses
      At line 92 in file __main.s
      At line 106 in file __main.s
      At line 123 in file __main.s

OutStr 00000000

Symbol: OutStr
   Definitions
      At line 34 in file __main.s
   Uses
      At line 83 in file __main.s
      At line 95 in file __main.s
      At line 100 in file __main.s
      At line 109 in file __main.s
      At line 114 in file __main.s
      At line 126 in file __main.s

PULSE_INIT 00000000

Symbol: PULSE_INIT
   Definitions
      At line 32 in file __main.s
   Uses
      At line 40 in file __main.s
Comment: PULSE_INIT used once
READ_INIT 00000000

Symbol: READ_INIT
   Definitions
      At line 33 in file __main.s
   Uses
      At line 39 in file __main.s
Comment: READ_INIT used once
4 symbols
366 symbols in table
