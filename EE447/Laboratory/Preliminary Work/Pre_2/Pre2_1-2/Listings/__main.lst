


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         
    3 00000000         
    4 00000000 00000010 
                       OFFSET  EQU              0x10
    5 00000000 20000480 
                       FIRST   EQU              0x20000480
    6 00000000 20000410 
                       STORE   EQU              0x20000410
    7 00000000 400053FC 
                       GPIO_PORTB_DATA
                               EQU              0x400053FC
    8 00000000 40005400 
                       GPIO_PORTB_DIR
                               EQU              0x40005400
    9 00000000 40005420 
                       GPIO_PORTB_AFSEL
                               EQU              0x40005420
   10 00000000 4000551C 
                       GPIO_PORTB_DEN
                               EQU              0x4000551C
   11 00000000 40005510 
                       GPIO_PORTB_PUR
                               EQU              0x40005510
   12 00000000 40005514 
                       GPIO_PORTB_PDR
                               EQU              0x40005514
   13 00000000 000000F0 
                       IOB     EQU              0xF0
   14 00000000 400FE608 
                       SYSCTL_RCGCGPIO
                               EQU              0x400FE608
   15 00000000         
   16 00000000         
   17 00000000         
   18 00000000                 AREA             main, READONLY, CODE
   19 00000000                 THUMB
   20 00000000                 EXTERN           DELAY       ;
   21 00000000                 EXPORT           __main
   22 00000000         
   23 00000000         __main
   24 00000000 492F    Start   LDR              R1, =SYSCTL_RCGCGPIO
   25 00000002 6808            LDR              R0, [R1]
   26 00000004 F040 0002       ORR              R0, R0, #0x2 ;Port B clock is e
                                                            nabled R0 = 0000001
                                                            0
   27 00000008 6008            STR              R0, [R1]
   28 0000000A BF00            NOP                          ;Wait for clock to 
                                                            stabilize
   29 0000000C BF00            NOP
   30 0000000E BF00            NOP
   31 00000010         
   32 00000010 492C            LDR              R1, =GPIO_PORTB_DIR ;direction 
                                                            of port B pins 
   33 00000012 6808            LDR              R0, [R1]
   34 00000014 F020 00FF       BIC              R0, #0xFF
   35 00000018 F040 00F0       ORR              R0, #IOB    ;r0 = 11110000 ;B7-
                                                            B4 is output ;B3-B0
                                                             is input 



ARM Macro Assembler    Page 2 


   36 0000001C 6008            STR              R0, [R1]
   37 0000001E 492A            LDR              R1, =GPIO_PORTB_AFSEL 
                                                            ;for afsel disable
   38 00000020 6808            LDR              R0, [R1]
   39 00000022 F020 00FF       BIC              R0, #0xFF
   40 00000026 6008            STR              R0, [R1]
   41 00000028 4928            LDR              R1, =GPIO_PORTB_DEN ;all pins a
                                                            re digital
   42 0000002A 6808            LDR              R0, [R1]
   43 0000002C F040 00FF       ORR              R0, #0xFF
   44 00000030 6008            STR              R0, [R1]
   45 00000032 4927            LDR              R1, =GPIO_PORTB_PUR ;pull up re
                                                            sistor settle
   46 00000034 6808            LDR              R0, [R1]
   47 00000036 F040 000F       ORR              R0, #0x0F   ;for input pin, pul
                                                            l up resistor is en
                                                            abled
   48 0000003A 6008            STR              R0, [R1]
   49 0000003C         
   50 0000003C 4925    Begin   LDR              R1,=GPIO_PORTB_DATA 
                                                            ;Data address in R1
                                                            
   51 0000003E F04F 00FF       MOV              R0,#0xFF
   52 00000042 6008            STR              R0,[R1]     ;All outputs OFF
   53 00000044         
   54 00000044 F04F 02F0 
                       InputCheck
                               MOV              R2,#0xF0
   55 00000048 6808            LDR              R0,[R1]
   56 0000004A EA4F 1010       LSR              R0,#4
   57 0000004E 0840            LSRS             R0,#1
   58 00000050 BF38 F002 
              02EF             ANDCC            R2,#0xEF    ;whether B4 is push
                                                            ed or not
   59 00000056 0840            LSRS             R0,#1
   60 00000058 BF38 F002 
              02DF             ANDCC            R2,#0xDF    ;whether B5 is push
                                                            ed or not
   61 0000005E 0840            LSRS             R0,#1
   62 00000060 BF38 F002 
              02BF             ANDCC            R2,#0xBF    ;whether B6 is push
                                                            ed or not
   63 00000066 0840            LSRS             R0,#1
   64 00000068 BF38 F002 
              027F             ANDCC            R2,#0x7F    ;whether B7 is push
                                                            ed or not
   65 0000006E 2AF0            CMP              R2,#0xF0
   66 00000070 D0E8            BEQ              InputCheck
   67 00000072 F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;wait 100msec delay
                                                            
   68 0000007A F7FF FFFE       BL               DELAY       ;prevent from bounc
                                                            ing
   69 0000007E F04F 04F0       MOV              R4,#0xF0
   70 00000082 6808            LDR              R0,[R1]
   71 00000084 EA4F 1010       LSR              R0,#4       ;
   72 00000088 0840            LSRS             R0,#1
   73 0000008A BF38 F004 
              04EF             ANDCC            R4,#0xEF    ;whether B4 is push



ARM Macro Assembler    Page 3 


                                                            ed or not
   74 00000090 0840            LSRS             R0,#1
   75 00000092 BF38 F004 
              04DF             ANDCC            R4,#0xDF    ;whether B5 is push
                                                            ed or not
   76 00000098 0840            LSRS             R0,#1
   77 0000009A BF38 F004 
              04BF             ANDCC            R4,#0xBF    ;whether B6 is push
                                                            ed or not
   78 000000A0 0840            LSRS             R0,#1
   79 000000A2 BF38 F004 
              047F             ANDCC            R4,#0x7F    ;whether B7 is push
                                                            ed or not
   80 000000A8 42A2            CMP              R2,R4       ; IF they are equal
                                                             set the output
   81 000000AA D1CB            BNE              InputCheck
   82 000000AC         ; If an input is read
   83 000000AC 4909            LDR              R1,=GPIO_PORTB_DATA ; Data addr
                                                            ess in R1
   84 000000AE 600C            STR              R4,[R1]     ;Corresponding Outp
                                                            uts set high
   85 000000B0 F24D 6089 
              F2C0 1014        MOV32            R0,#18142857 ;5Sec
   86 000000B8 F7FF FFFE       BL               DELAY
   87 000000BC E7BE            B                Begin
   88 000000BE         
   89 000000BE 00 00           ALIGN
   90 000000C0                 END
              400FE608 
              40005400 
              40005420 
              4000551C 
              40005510 
              400053FC 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\__main.d -o.\objects\__main.o -I.\RTE\_Target_1 -IC:\
Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\ARM\CM
SIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 526
" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\__main.lst __main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Begin 0000003C

Symbol: Begin
   Definitions
      At line 50 in file __main.s
   Uses
      At line 87 in file __main.s
Comment: Begin used once
InputCheck 00000044

Symbol: InputCheck
   Definitions
      At line 54 in file __main.s
   Uses
      At line 66 in file __main.s
      At line 81 in file __main.s

Start 00000000

Symbol: Start
   Definitions
      At line 24 in file __main.s
   Uses
      None
Comment: Start unused
__main 00000000

Symbol: __main
   Definitions
      At line 23 in file __main.s
   Uses
      At line 21 in file __main.s
Comment: __main used once
main 00000000

Symbol: main
   Definitions
      At line 18 in file __main.s
   Uses
      None
Comment: main unused
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FIRST 20000480

Symbol: FIRST
   Definitions
      At line 5 in file __main.s
   Uses
      None
Comment: FIRST unused
GPIO_PORTB_AFSEL 40005420

Symbol: GPIO_PORTB_AFSEL
   Definitions
      At line 9 in file __main.s
   Uses
      At line 37 in file __main.s
Comment: GPIO_PORTB_AFSEL used once
GPIO_PORTB_DATA 400053FC

Symbol: GPIO_PORTB_DATA
   Definitions
      At line 7 in file __main.s
   Uses
      At line 50 in file __main.s
      At line 83 in file __main.s

GPIO_PORTB_DEN 4000551C

Symbol: GPIO_PORTB_DEN
   Definitions
      At line 10 in file __main.s
   Uses
      At line 41 in file __main.s
Comment: GPIO_PORTB_DEN used once
GPIO_PORTB_DIR 40005400

Symbol: GPIO_PORTB_DIR
   Definitions
      At line 8 in file __main.s
   Uses
      At line 32 in file __main.s
Comment: GPIO_PORTB_DIR used once
GPIO_PORTB_PDR 40005514

Symbol: GPIO_PORTB_PDR
   Definitions
      At line 12 in file __main.s
   Uses
      None
Comment: GPIO_PORTB_PDR unused
GPIO_PORTB_PUR 40005510

Symbol: GPIO_PORTB_PUR
   Definitions
      At line 11 in file __main.s
   Uses
      At line 45 in file __main.s
Comment: GPIO_PORTB_PUR used once
IOB 000000F0




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: IOB
   Definitions
      At line 13 in file __main.s
   Uses
      At line 35 in file __main.s
Comment: IOB used once
OFFSET 00000010

Symbol: OFFSET
   Definitions
      At line 4 in file __main.s
   Uses
      None
Comment: OFFSET unused
STORE 20000410

Symbol: STORE
   Definitions
      At line 6 in file __main.s
   Uses
      None
Comment: STORE unused
SYSCTL_RCGCGPIO 400FE608

Symbol: SYSCTL_RCGCGPIO
   Definitions
      At line 14 in file __main.s
   Uses
      At line 24 in file __main.s
Comment: SYSCTL_RCGCGPIO used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

DELAY 00000000

Symbol: DELAY
   Definitions
      At line 20 in file __main.s
   Uses
      At line 68 in file __main.s
      At line 86 in file __main.s

1 symbol
353 symbols in table
