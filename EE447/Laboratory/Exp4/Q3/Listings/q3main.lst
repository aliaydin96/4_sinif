


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******** 
    2 00000000         ; Program_Directives.s  
    3 00000000         ; Copies the table from one location
    4 00000000         ; to another memory location.           
    5 00000000         ; Directives and Addressing modes are   
    6 00000000         ; explained with this program.   
    7 00000000         ;*******************************************************
                       ******** 
    8 00000000         ;*******************************************************
                       ******** 
    9 00000000         ; EQU Directives
   10 00000000         ; These directives do not allocate memory
   11 00000000         ;*******************************************************
                       ********
   12 00000000         ;LABEL  DIRECTIVE VALUE  COMMENT
   13 00000000 00000010 
                       OFFSET  EQU              0x10
   14 00000000 20000480 
                       FIRST   EQU              0x20000480
   15 00000000 20000410 
                       STORE   EQU              0x20000410
   16 00000000 400053FC 
                       GPIO_PORTB_DATA
                               EQU              0x400053FC
   17 00000000 40005400 
                       GPIO_PORTB_DIR
                               EQU              0x40005400
   18 00000000 40005420 
                       GPIO_PORTB_AFSEL
                               EQU              0x40005420
   19 00000000 4000551C 
                       GPIO_PORTB_DEN
                               EQU              0x4000551C
   20 00000000 40005510 
                       GPIO_PORTB_PUR
                               EQU              0x40005510
   21 00000000 40005514 
                       GPIO_PORTB_PDR
                               EQU              0x40005514
   22 00000000 0000000F 
                       IOB     EQU              0x0F
   23 00000000 400FE608 
                       SYSCTL_RCGCGPIO
                               EQU              0x400FE608
   24 00000000         
   25 00000000         ;*******************************************************
                       ********
   26 00000000         ; Directives - This Data Section is part of the code
   27 00000000         ; It is in the read only section  so values cannot be ch
                       anged.
   28 00000000         ;*******************************************************
                       ********
   29 00000000         ;LABEL  DIRECTIVE VALUE  COMMENT
   30 00000000                 AREA             sdata, DATA, READONLY
   31 00000000                 THUMB
   32 00000000 10      CTR1    DCB              0x10
   33 00000001 43 6F 70 
              79 69 6E 



ARM Macro Assembler    Page 2 


              67 20 74 
              61 62 6C 
              65 2E 2E 
              2E       MSG     DCB              "Copying table..."
   34 00000011 0D              DCB              0x0D
   35 00000012 04              DCB              0x04
   36 00000013         ;*******************************************************
                       ********
   37 00000013         ; Program section           
   38 00000013         ;*******************************************************
                       ********
   39 00000013         ;LABEL  DIRECTIVE VALUE  COMMENT
   40 00000013                 AREA             main, READONLY, CODE
   41 00000000                 THUMB
   42 00000000                 EXTERN           OutStr      ; Reference externa
                                                            l subroutine 
   43 00000000                 EXTERN           InChar      ; Serial input Adde
                                                            d
   44 00000000                 EXTERN           delay       ;
   45 00000000                 EXPORT           __main      ; Make available
   46 00000000         
   47 00000000         __main
   48 00000000 4958    Start   LDR              R1 , =SYSCTL_RCGCGPIO
   49 00000002 6808            LDR              R0 , [ R1 ]
   50 00000004 F040 0002       ORR              R0 , R0 , #0x2 ;Port B clock en
                                                            abled
   51 00000008 6008            STR              R0 , [ R1 ]
   52 0000000A BF00            NOP                          ;Wait for clock to 
                                                            stabilize
   53 0000000C BF00            NOP
   54 0000000E BF00            NOP
   55 00000010 4955            LDR              R1 , =GPIO_PORTB_DIR ; c o n f 
                                                            i g . o f p o r t B
                                                             s t a r t s
   56 00000012 6808            LDR              R0 , [ R1 ]
   57 00000014 F020 00FF       BIC              R0 , #0xFF
   58 00000018 F040 000F       ORR              R0 , #IOB   ;00001111 1->output
                                                            
   59 0000001C 6008            STR              R0 , [ R1 ]
   60 0000001E 4953            LDR              R1 , =GPIO_PORTB_AFSEL
   61 00000020 6808            LDR              R0 , [ R1 ]
   62 00000022 F020 00FF       BIC              R0 , #0xFF
   63 00000026 6008            STR              R0 , [ R1 ]
   64 00000028 4951            LDR              R1 , =GPIO_PORTB_DEN
   65 0000002A 6808            LDR              R0 , [ R1 ]
   66 0000002C F040 00FF       ORR              R0 , #0xFF
   67 00000030 6008            STR              R0 , [ R1 ]
   68 00000032 4950            LDR              R1 , =GPIO_PORTB_PUR
   69 00000034 6808            LDR              R0 , [ R1 ]
   70 00000036 F040 00F0       ORR              R0 , #0xF0
   71 0000003A 6008            STR              R0 , [ R1 ]
   72 0000003C         
   73 0000003C 494E    Begin   LDR              R1,=GPIO_PORTB_DATA ; Data addr
                                                            ess in R1
   74 0000003E F04F 0000       MOV              R0,#0x00
   75 00000042 6008            STR              R0,[R1]     ; All outputs OFF
   76 00000044 F04F 0200       MOV              R2,#0       ;
   77 00000048 6808    InputCheck
                               LDR              R0,[R1]     ;



ARM Macro Assembler    Page 3 


   78 0000004A EA4F 1010       LSR              R0,#4       ;
   79 0000004E 0840            LSRS             R0,#1       ;
   80 00000050 D306            BCC              Delay100
   81 00000052 0840            LSRS             R0,#1       ;
   82 00000054 D304            BCC              Delay100
   83 00000056 0840            LSRS             R0,#1       ;
   84 00000058 D302            BCC              Delay100
   85 0000005A 0840            LSRS             R0,#1       ;
   86 0000005C D300            BCC              Delay100
   87 0000005E E7F3            B                InputCheck
   88 00000060 F646 2000 
              F2C0 0018 
                       Delay100
                               MOV32            R0,#1600000 ;
   89 00000068 F7FF FFFE       BL               delay
   90 0000006C 6808            LDR              R0,[R1]     ;
   91 0000006E EA4F 1010       LSR              R0,#4       ;
   92 00000072 0840            LSRS             R0,#1       ;
   93 00000074 D306            BCC              Detect
   94 00000076 0840            LSRS             R0,#1       ;
   95 00000078 D304            BCC              Detect
   96 0000007A 0840            LSRS             R0,#1       ;
   97 0000007C D302            BCC              Detect
   98 0000007E 0840            LSRS             R0,#1       ;
   99 00000080 D300            BCC              Detect
  100 00000082 E7E1            B                InputCheck
  101 00000084 493C    Detect  LDR              R1,=GPIO_PORTB_DATA ; Data addr
                                                            ess in R1
  102 00000086 F04F 000E       MOV              R0,#0x0E    ;output 1110
  103 0000008A 6008            STR              R0,[R1]     ;
  104 0000008C F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;
  105 00000094 F7FF FFFE       BL               delay
  106 00000098 F000 F822       BL               Which
  107 0000009C F04F 000D       MOV              R0,#0x0D    ;output 1101
  108 000000A0 6008            STR              R0,[R1]     ;
  109 000000A2 F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;
  110 000000AA F7FF FFFE       BL               delay
  111 000000AE F000 F817       BL               Which
  112 000000B2 F04F 000B       MOV              R0,#0x0B    ;output 1011
  113 000000B6 6008            STR              R0,[R1]     ;
  114 000000B8 F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;
  115 000000C0 F7FF FFFE       BL               delay
  116 000000C4 F000 F80C       BL               Which
  117 000000C8 F04F 0007       MOV              R0,#0x07    ;output 0111
  118 000000CC 6008            STR              R0,[R1]     ;
  119 000000CE F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;
  120 000000D6 F7FF FFFE       BL               delay
  121 000000DA F000 F801       BL               Which
  122 000000DE E7AD            B                Begin
  123 000000E0 6808    Which   LDR              R0,[R1]     ;
  124 000000E2 EA4F 1010       LSR              R0,#4       ;
  125 000000E6 0840            LSRS             R0,#1       ;
  126 000000E8 D30E            BCC              NextStep    ;
  127 000000EA F102 0201       ADD              R2,R2,#1    ;
  128 000000EE 0840            LSRS             R0,#1       ;



ARM Macro Assembler    Page 4 


  129 000000F0 D30A            BCC              NextStep    ;
  130 000000F2 F102 0201       ADD              R2,R2,#1    ;
  131 000000F6 0840            LSRS             R0,#1       ;
  132 000000F8 D306            BCC              NextStep    ;
  133 000000FA F102 0201       ADD              R2,R2,#1    ;
  134 000000FE 0840            LSRS             R0,#1       ;
  135 00000100 D302            BCC              NextStep    ;
  136 00000102 F102 0201       ADD              R2,R2,#1    ;
  137 00000106 4770            BX               LR
  138 00000108         
  139 00000108         
  140 00000108 6808    NextStep
                               LDR              R0,[R1]     ;
  141 0000010A EA4F 1010       LSR              R0,#4       ;
  142 0000010E 0840            LSRS             R0,#1       ;
  143 00000110 D3FA            BCC              NextStep    ;
  144 00000112 0840            LSRS             R0,#1       ;
  145 00000114 D3F8            BCC              NextStep    ;
  146 00000116 0840            LSRS             R0,#1       ;
  147 00000118 D3F6            BCC              NextStep    ;
  148 0000011A 0840            LSRS             R0,#1       ;
  149 0000011C D3F4            BCC              NextStep    ;
  150 0000011E         ;If all inputs show 1 that is no input comes
  151 0000011E F646 2000 
              F2C0 0018        MOV32            R0,#1600000 ;
  152 00000126 F7FF FFFE       BL               delay
  153 0000012A 6808            LDR              R0,[R1]     ;
  154 0000012C EA4F 1010       LSR              R0,#4       ;
  155 00000130 0840            LSRS             R0,#1       ;
  156 00000132 D383            BCC              Begin       ;
  157 00000134 0840            LSRS             R0,#1       ;
  158 00000136 D381            BCC              Begin       ;
  159 00000138 0840            LSRS             R0,#1       ;
  160 0000013A F4FF AF7F       BCC              Begin       ;
  161 0000013E 0840            LSRS             R0,#1       ;
  162 00000140 F4FF AF7C       BCC              Begin       ;
  163 00000144         
  164 00000144 490D            LDR              R1,=FIRST
  165 00000146 2A0A            CMP              R2,#10
  166 00000148 BFB4 3230       ADDLT            R2,R2,#0x30 ; ASCII code modifi
                                                            ed
  167 0000014C 3237            ADDGE            R2,R2,#0x37 ;
  168 0000014E 600A            STR              R2,[R1]     ; R2 is stored to w
                                                            here R0 points
  169 00000150 460D            MOV              R5,R1       ;  OutStr modificat
                                                            ion
  170 00000152 F101 0101       ADD              R1,R1,#1    ;
  171 00000156 F04F 0204       MOV              R2,#0x04    ;
  172 0000015A 600A            STR              R2,[R1]     ; End setup for Out
                                                            Str
  173 0000015C F7FF FFFE       BL               OutStr
  174 00000160 E76C            B                Begin
  175 00000162         
  176 00000162         ;*******************************************************
                       ********
  177 00000162         ; End of the program  section
  178 00000162         ;*******************************************************
                       ********
  179 00000162         ;LABEL      DIRECTIVE       VALUE                       



ARM Macro Assembler    Page 5 


                           COMMENT
  180 00000162 00 00           ALIGN
  181 00000164                 END
              400FE608 
              40005400 
              40005420 
              4000551C 
              40005510 
              400053FC 
              20000480 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\q3main.d -o.\objects\q3main.o -I"C:\Users\Furkan\Goog
le Drive\Ders Kitaplarý-Notlar\4. Sýnýf\EE447\LAB\Exp4\Q3\RTE" -IC:\Keil_v5\ARM
\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\ARM\CMSIS\Include
 --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 521" --predefi
ne="TM4C123GH6PM SETA 1" --list=.\listings\q3main.lst Q3Main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CTR1 00000000

Symbol: CTR1
   Definitions
      At line 32 in file Q3Main.s
   Uses
      None
Comment: CTR1 unused
MSG 00000001

Symbol: MSG
   Definitions
      At line 33 in file Q3Main.s
   Uses
      None
Comment: MSG unused
sdata 00000000

Symbol: sdata
   Definitions
      At line 30 in file Q3Main.s
   Uses
      None
Comment: sdata unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Begin 0000003C

Symbol: Begin
   Definitions
      At line 73 in file Q3Main.s
   Uses
      At line 122 in file Q3Main.s
      At line 156 in file Q3Main.s
      At line 158 in file Q3Main.s
      At line 160 in file Q3Main.s
      At line 162 in file Q3Main.s
      At line 174 in file Q3Main.s

Delay100 00000060

Symbol: Delay100
   Definitions
      At line 88 in file Q3Main.s
   Uses
      At line 80 in file Q3Main.s
      At line 82 in file Q3Main.s
      At line 84 in file Q3Main.s
      At line 86 in file Q3Main.s

Detect 00000084

Symbol: Detect
   Definitions
      At line 101 in file Q3Main.s
   Uses
      At line 93 in file Q3Main.s
      At line 95 in file Q3Main.s
      At line 97 in file Q3Main.s
      At line 99 in file Q3Main.s

InputCheck 00000048

Symbol: InputCheck
   Definitions
      At line 77 in file Q3Main.s
   Uses
      At line 87 in file Q3Main.s
      At line 100 in file Q3Main.s

NextStep 00000108

Symbol: NextStep
   Definitions
      At line 140 in file Q3Main.s
   Uses
      At line 126 in file Q3Main.s
      At line 129 in file Q3Main.s
      At line 132 in file Q3Main.s
      At line 135 in file Q3Main.s
      At line 143 in file Q3Main.s
      At line 145 in file Q3Main.s
      At line 147 in file Q3Main.s
      At line 149 in file Q3Main.s




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Start 00000000

Symbol: Start
   Definitions
      At line 48 in file Q3Main.s
   Uses
      None
Comment: Start unused
Which 000000E0

Symbol: Which
   Definitions
      At line 123 in file Q3Main.s
   Uses
      At line 106 in file Q3Main.s
      At line 111 in file Q3Main.s
      At line 116 in file Q3Main.s
      At line 121 in file Q3Main.s

__main 00000000

Symbol: __main
   Definitions
      At line 47 in file Q3Main.s
   Uses
      At line 45 in file Q3Main.s
Comment: __main used once
main 00000000

Symbol: main
   Definitions
      At line 40 in file Q3Main.s
   Uses
      None
Comment: main unused
9 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FIRST 20000480

Symbol: FIRST
   Definitions
      At line 14 in file Q3Main.s
   Uses
      At line 164 in file Q3Main.s
Comment: FIRST used once
GPIO_PORTB_AFSEL 40005420

Symbol: GPIO_PORTB_AFSEL
   Definitions
      At line 18 in file Q3Main.s
   Uses
      At line 60 in file Q3Main.s
Comment: GPIO_PORTB_AFSEL used once
GPIO_PORTB_DATA 400053FC

Symbol: GPIO_PORTB_DATA
   Definitions
      At line 16 in file Q3Main.s
   Uses
      At line 73 in file Q3Main.s
      At line 101 in file Q3Main.s

GPIO_PORTB_DEN 4000551C

Symbol: GPIO_PORTB_DEN
   Definitions
      At line 19 in file Q3Main.s
   Uses
      At line 64 in file Q3Main.s
Comment: GPIO_PORTB_DEN used once
GPIO_PORTB_DIR 40005400

Symbol: GPIO_PORTB_DIR
   Definitions
      At line 17 in file Q3Main.s
   Uses
      At line 55 in file Q3Main.s
Comment: GPIO_PORTB_DIR used once
GPIO_PORTB_PDR 40005514

Symbol: GPIO_PORTB_PDR
   Definitions
      At line 21 in file Q3Main.s
   Uses
      None
Comment: GPIO_PORTB_PDR unused
GPIO_PORTB_PUR 40005510

Symbol: GPIO_PORTB_PUR
   Definitions
      At line 20 in file Q3Main.s
   Uses
      At line 68 in file Q3Main.s
Comment: GPIO_PORTB_PUR used once
IOB 0000000F




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: IOB
   Definitions
      At line 22 in file Q3Main.s
   Uses
      At line 58 in file Q3Main.s
Comment: IOB used once
OFFSET 00000010

Symbol: OFFSET
   Definitions
      At line 13 in file Q3Main.s
   Uses
      None
Comment: OFFSET unused
STORE 20000410

Symbol: STORE
   Definitions
      At line 15 in file Q3Main.s
   Uses
      None
Comment: STORE unused
SYSCTL_RCGCGPIO 400FE608

Symbol: SYSCTL_RCGCGPIO
   Definitions
      At line 23 in file Q3Main.s
   Uses
      At line 48 in file Q3Main.s
Comment: SYSCTL_RCGCGPIO used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

InChar 00000000

Symbol: InChar
   Definitions
      At line 43 in file Q3Main.s
   Uses
      None
Comment: InChar unused
OutStr 00000000

Symbol: OutStr
   Definitions
      At line 42 in file Q3Main.s
   Uses
      At line 173 in file Q3Main.s
Comment: OutStr used once
delay 00000000

Symbol: delay
   Definitions
      At line 44 in file Q3Main.s
   Uses
      At line 89 in file Q3Main.s
      At line 105 in file Q3Main.s
      At line 110 in file Q3Main.s
      At line 115 in file Q3Main.s
      At line 120 in file Q3Main.s
      At line 152 in file Q3Main.s

3 symbols
362 symbols in table
